# Bug

## Bug分析

要抵制只修正你看到的症状的急迫愿望，更有可能的情况是，实际的故障离你正在观察的地方还有几步，并且可能涉及许多其他的相关事物，要总算设法找出问题的根源，而不是问题的特定表现

### 看

#### 直接信息

##### Bug票获取信息

###### 各个研发阶段的Bug票

####### 实网阶段Bug票

在这个阶段Telephony侧投入的代码只有固定的几个，因此在这个阶段出现了Bug，可以从以下几个方面检查分析

1.首先查看Bug票上描述的信息与那个Feature可以对应，由于投入的Feature比较少，因此如果不能很快判断出来，可以每一个都检查，看是否有漏投，或者投错。

2.由于在这个阶段出现的问题，优先级一般都不低，因此如果是我们这边不能分析出结果，并且Feature相关的都是投入正常的话。可以找protocol侧帮忙一起分析。（前提不是人家转过来的）



####### IT阶段Bug票

在这个阶段的Bug，基本是基于Feature报告的，因此可以参考实网阶段Bug的解决流程，但是该阶段的Feature都已经投入了，因此如果不能判断是那个Feature导致的问题，就需要从Log详细分析了


####### ST阶段Bug票

该阶段Bug为系统测试，因此不仅仅是测试那些Feature的行为是否正常，多为几个功能组合测试，
解决这个方面的Bug需要对手机业务有详细的了解，在以后的分析中会详细将如何分析不同业务的流程

####### CEDS阶段Bug票

该阶段的Bug，是运营商报告的，优先级很高，需要及时分析，这个大部分其实和Feature没有直接的关联，该阶段的Bug分析也是需要对手机电话业务有一定的理解，具体后面会分享

###### 复现概率

这个是在Bug票上可以直接看到的，如果没有那就是测试没有写（可以投诉他）.

这个复现概率很重要，如果复现概率不是100%的.那么这个问题很可能是流程，时序的问题。一般定位这方面的问题都需要确认先后Log，时间长短等

###### 描述信息

在描述信息中，我们可以对问题发生是的状态，现象，关联的Feature等有一个了解，有些问题已经在描述中给出了关键点甚至已经给了解决方案（一般这种的都是客户或者其他研发报告的）

###### 复现手顺

这里可以检查一下几点
1. 测试的手顺是否正确（如果是测试Feature的话，可以对照Feature测试表）

2. 需要确认相关的手顺是否能得到期待现象（例如 测试步骤是打电话  期待结果却是照相）


##### Redmine分析

redmine分析

1.redmine 问题需要分析的多数为IT阶段，测试起的确认票，这是为了减少不必要的Bug报告，绝大多数是和Feature相关，按照Feature流程分析，

##### UI界面分析

1.查看问题发生的界面布局
2.查看关键的控件相关逻辑
3通过工具对UI界面进分析，查看问题复现时，是否出现了其他的控件


### 查

#### 间接信息

##### Log分析

Log分析

1.可以从Log中直接看出的错误等，例如明显的error， crash，AndroidRunTime，exception等

2.问题相关的关键Log是否正常输出
3.查看底层上报的消息是否有异常，错误等上报

##### Feature 流程相关分析

1.检查该Feature是否投入了
2.检查是否有开关（宏，判断条件）是否打开
3.检查相关Log是否输出




### 加

1.添加关键点Log，
   当问题分析找不到接下来的流程时，需要在你认为的流程下添加Log，用以确认代码流程是怎样的
   
2.添加测试APK
   由于在FW侧提供了很多的接口，如果需要确认某个接口是否起效，需要自己写一个测试apk调用相关接口

### 比

1.和原生机对比
   通过以上确认问题和Feature无关，且我们对相关代码没有做改动，我们需要和原生机对比相关的行为是否一致
   
2.当问题分析不知道如何分析时
    在这个时候一定要找一份正常的Log，对比分析，这个很重要
    

### 玩

主要是针对低复现概率的问题
玩的目的是查找是否能让问题提高复现概率，甚至达到问题100%复现

### 叫爸爸

最后实在不能分析出结果了，找大神一起帮忙看看

## Bug解析

### Patch打入

1.题在其他机种或者Bug上已经解决了，把相应的提交打入到问题出现的机种上

2.Security Patch打入


### 修改问题代码

1.代码修改一定是遵循需求修改的
2.修改的代码不能产生降级
3.最好能找到已经存在的代码作为参考
4.产生的影响最小化
    1)代码对用户影响最小
    2)修改的代码对其他功能影响最小
    3)当多个方案存在时，需要与客户沟通，在沟通时写出每个方案的优缺点，让客户确认或者探讨使用那个方案


### 原生Bug

对于原生Bug
1.确认该问题在google 的Bug系统上是否有解决方案，或者在Google上搜索相关的信息，
2.如果修改比较大且不是官方的解决方案，需要和客户讨论是否必须修改
3.如果影响不大的问题，或者有违背需求的解决方案时，需要和客户沟通确认

## 代码提交

1.提交前，需要按需求规则写注释 history等
2.代码提交后，需要找人review，Jenkins编译，入库
3.代码入库后，一定要更新Bug票
4.最后Bug测试验证OK后关闭

## Bug验证

严格遵守代码的提交规则，每个Bug解析后，必须编译验证
1.bug本身的修复
2.编译验证
3.周边验证
